.sky {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: radial-gradient(ellipse at center, #160143 0%, #000000 80%);
  overflow: hidden;
  z-index: -1;
}

// ========================
// REGULAR FLICKERING STARS
// ========================
.star {
  position: absolute;
  border-radius: 50%;
  opacity: 0.8;
  box-shadow: 0 0 6px currentColor;
  animation: flicker infinite ease-in-out alternate;
}

// Layers for subtle parallax motion
.layer-1 { animation-name: flicker, drift1; animation-duration: 3s, 200s; }
.layer-2 { animation-name: flicker, drift2; animation-duration: 2.5s, 150s; }
.layer-3 { animation-name: flicker, drift3; animation-duration: 2s, 100s; }

@keyframes flicker {
  0%, 100% { opacity: 1; transform: scale(1); }
  50%      { opacity: 0.4; transform: scale(0.8); }
}

@keyframes drift1 { from { transform: translate(0, 0); } to { transform: translate(-2px, -4px); } }
@keyframes drift2 { from { transform: translate(0, 0); } to { transform: translate( 2px, -6px); } }
@keyframes drift3 { from { transform: translate(0, 0); } to { transform: translate(-2px, -4px); } }

// ========================
// MILKY WAY CLUSTER STARS
// ========================
.cluster-star {
  box-shadow: 0 0 3px currentColor;
  opacity: 0.65;
}

// ========================
// MILKY WAY — CONTAINER
// ========================
.milky-way {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
}

// ----- Broad outer diffuse glow ----- //
.mw-glow {
  position: absolute;
  width: 300%;
  height: 100%;
  top: 0;
  left: -100%;
  transform: rotate(-35deg);
  transform-origin: center center;
  animation: milkyDrift 240s ease-in-out infinite;

  background:
    // Warm galactic-center glow  (off-center toward Sagittarius)
    radial-gradient(
      ellipse 22% 6% at 58% 50%,
      rgba(255, 210, 160, 0.09) 0%,
      rgba(255, 190, 140, 0.03) 60%,
      transparent 100%
    ),
    // Cool purple halo surrounding the band
    radial-gradient(
      ellipse 50% 16% at 50% 50%,
      rgba(160, 140, 210, 0.07) 0%,
      rgba(140, 120, 190, 0.02) 70%,
      transparent 100%
    ),
    // Main luminous gaussian band
    linear-gradient(
      to bottom,
      transparent                     30%,
      rgba(140, 120, 180, 0.015)      34%,
      rgba(170, 155, 210, 0.04)       38%,
      rgba(190, 175, 225, 0.07)       42%,
      rgba(200, 190, 235, 0.10)       46%,
      rgba(210, 200, 240, 0.11)       50%,
      rgba(200, 190, 235, 0.10)       54%,
      rgba(190, 175, 225, 0.07)       58%,
      rgba(170, 155, 210, 0.04)       62%,
      rgba(140, 120, 180, 0.015)      66%,
      transparent                     70%
    );

  filter: blur(30px);
}

// ----- Bright core + nebula patches ----- //
.mw-core {
  position: absolute;
  width: 300%;
  height: 100%;
  top: 0;
  left: -100%;
  transform: rotate(-35deg);
  transform-origin: center center;
  animation: milkyDrift 240s ease-in-out infinite;

  background:
    // Emission nebula — pink/magenta  (Lagoon / Omega region)
    radial-gradient(
      ellipse 7% 3.5% at 57% 49%,
      rgba(255, 160, 210, 0.13) 0%,
      rgba(255, 120, 180, 0.04) 50%,
      transparent 50%
    ),
    // Reflection nebula — cool blue
    radial-gradient(
      ellipse 5% 2.5% at 36% 51%,
      rgba(140, 190, 255, 0.11) 0%,
      rgba(120, 170, 255, 0.03) 60%,
      transparent 40%
    ),
    // Warm patch closer to center
    radial-gradient(
      ellipse 4% 2% at 64% 50.5%,
      rgba(255, 225, 170, 0.09) 0%,
      transparent 100%
    ),
    // Faint violet nebula
    radial-gradient(
      ellipse 3% 1.5% at 48% 50%,
      rgba(200, 180, 255, 0.08) 0%,
      transparent 100%
    ),
    // Concentrated core band with dark Great Rift
    linear-gradient(
      to bottom,
      transparent                     40%,
      rgba(220, 210, 245, 0.02)       43%,
      rgba(240, 235, 255, 0.06)       46%,
      rgba(255, 250, 255, 0.09)       48%,
      rgba(130, 110, 160, 0.01)       49.3%,     // dust rift edge
      rgba(80,  60, 110, 0.005)       50%,       // dark rift center
      rgba(130, 110, 160, 0.01)       50.7%,     // dust rift edge
      rgba(255, 250, 255, 0.09)       52%,
      rgba(240, 235, 255, 0.06)       54%,
      rgba(220, 210, 245, 0.02)       57%,
      transparent                     60%
    );

  filter: blur(8px);

  // Fine bright filaments inside the core
  &::before {
    content: '';
    position: absolute;
    width: 100%;
    height: 100%;
    background:
      linear-gradient(
        to bottom,
        transparent                     47%,
        rgba(255, 255, 255, 0.03)       48.5%,
        rgba(100, 80, 120, 0.008)       49.7%,   // micro dust
        rgba(100, 80, 120, 0.008)       50.3%,   // micro dust
        rgba(255, 255, 255, 0.03)       51.5%,
        transparent                     53%
      );
    filter: blur(2px);
  }

  // Extra-bright knots / star-forming regions
  &::after {
    content: '';
    position: absolute;
    width: 100%;
    height: 100%;
    background:
      radial-gradient(ellipse 2.5% 1.5% at 55% 49.5%, rgba(255, 255, 255, 0.05)  0%, transparent 100%),
      radial-gradient(ellipse 3%   2%   at 43% 50.5%, rgba(255, 255, 255, 0.04)  0%, transparent 100%),
      radial-gradient(ellipse 2%   1%   at 62% 49.8%, rgba(255, 240, 200, 0.06)  0%, transparent 100%),
      radial-gradient(ellipse 1.5% 1%   at 35% 50.2%, rgba(200, 220, 255, 0.05)  0%, transparent 100%);
    filter: blur(3px);
  }
}

// Very slow subtle drift for the glow layers (alive feel)
@keyframes milkyDrift {
  0%, 100% { transform: rotate(-35deg) translate(0, 0);          }
  50%      { transform: rotate(-34.5deg) translate(0.3%, -0.2%); }
}


// ================================================================
//  3-D  M O O N   +   A S T E R O I D S
// ================================================================

$moon-size: 180px;

// --- Moon system container (anchored bottom-right) --- //
.moon-system {
  position: absolute;
  right: 12%;
  bottom: 14%;
  width: $moon-size;
  height: $moon-size;
  pointer-events: none;
  animation: moonFloat 30s ease-in-out infinite;
}

// --- Atmospheric halo / glow around the moon --- //
.moon-halo {
  position: absolute;
  top: 50%;
  left: 50%;
  width: $moon-size * 2.2;
  height: $moon-size * 2.2;
  transform: translate(-50%, -50%);
  border-radius: 50%;
  background: radial-gradient(
    circle,
    rgba(200, 210, 235, 0.08) 0%,
    rgba(180, 195, 220, 0.05) 25%,
    rgba(160, 180, 210, 0.025) 45%,
    rgba(140, 160, 200, 0.01)  60%,
    transparent                70%
  );
  filter: blur(8px);
}

// --- Main moon sphere --- //
.moon {
  position: absolute;
  width: 100%;
  height: 100%;
  border-radius: 50%;
  overflow: hidden;

  // Base sphere gradient — lit from upper-left
  background:
    radial-gradient(
      circle at 38% 35%,
      #e8e4df 0%,                  // bright highland
      #d5d0c8 15%,
      #c4bfb5 30%,
      #b0aaa0 50%,
      #9a948a 70%,
      #7a746c 85%,
      #5a5550 100%                 // dark limb
    );

  box-shadow:
    // inner depth
    inset -8px -6px 20px rgba(0, 0, 0, 0.5),
    inset  4px  4px 15px rgba(255, 255, 255, 0.12),
    // subtle outer glow on lit side
    -4px -3px 15px rgba(200, 210, 230, 0.15);
}

// --- Maria (dark "seas") --- //
.moon-maria {
  position: absolute;
  width: 100%;
  height: 100%;
  border-radius: 50%;

  background:
    // Mare Imbrium (large, upper-left)
    radial-gradient(
      ellipse 38% 30% at 32% 30%,
      rgba(80, 78, 72, 0.35) 0%,
      rgba(90, 86, 80, 0.15) 50%,
      transparent 100%
    ),
    // Mare Serenitatis (right of Imbrium)
    radial-gradient(
      ellipse 20% 22% at 55% 28%,
      rgba(75, 72, 68, 0.30) 0%,
      rgba(85, 82, 76, 0.10) 60%,
      transparent 100%
    ),
    // Mare Tranquillitatis (center-right)
    radial-gradient(
      ellipse 25% 18% at 62% 45%,
      rgba(78, 74, 70, 0.28) 0%,
      rgba(88, 84, 78, 0.08) 60%,
      transparent 100%
    ),
    // Mare Crisium (small, far right)
    radial-gradient(
      ellipse 12% 10% at 78% 32%,
      rgba(70, 68, 62, 0.32) 0%,
      transparent 100%
    ),
    // Mare Nubium (lower-left)
    radial-gradient(
      ellipse 22% 16% at 38% 62%,
      rgba(82, 78, 72, 0.25) 0%,
      rgba(90, 86, 80, 0.08) 50%,
      transparent 100%
    ),
    // Oceanus Procellarum (wide, left)
    radial-gradient(
      ellipse 28% 40% at 22% 48%,
      rgba(85, 80, 74, 0.22) 0%,
      rgba(95, 90, 82, 0.06) 60%,
      transparent 100%
    ),
    // Mare Nectaris (small, lower-right)
    radial-gradient(
      ellipse 10% 12% at 68% 58%,
      rgba(76, 72, 66, 0.25) 0%,
      transparent 100%
    );
}

// --- Primary craters --- //
.moon-craters {
  position: absolute;
  width: 100%;
  height: 100%;
  border-radius: 50%;

  background:
    // Tycho (large, with bright rays — the most prominent crater)
    radial-gradient(circle at 46% 78%,
      rgba(55, 50, 45, 0.40) 0%,
      rgba(75, 70, 64, 0.25) 3.5%,
      rgba(190, 185, 175, 0.20) 4.5%,   // bright rim
      rgba(190, 185, 175, 0.08) 6%,     // ray start
      transparent 12%
    ),
    // Copernicus (medium, upper-center)
    radial-gradient(circle at 38% 48%,
      rgba(60, 55, 48, 0.35) 0%,
      rgba(80, 74, 68, 0.18) 2.5%,
      rgba(175, 170, 162, 0.15) 3.5%,
      transparent 7%
    ),
    // Kepler (small, left)
    radial-gradient(circle at 24% 44%,
      rgba(65, 60, 54, 0.30) 0%,
      rgba(160, 155, 148, 0.12) 2%,
      transparent 4.5%
    ),
    // Aristarchus (very bright, left-upper)
    radial-gradient(circle at 18% 30%,
      rgba(200, 195, 188, 0.25) 0%,      // bright crater
      rgba(165, 160, 152, 0.15) 2%,
      transparent 5%
    ),
    // Plato (dark floor, upper)
    radial-gradient(circle at 42% 18%,
      rgba(50, 48, 42, 0.35) 0%,
      rgba(140, 136, 128, 0.10) 3%,
      transparent 5.5%
    ),
    // Grimaldi (dark, far-left)
    radial-gradient(circle at 10% 50%,
      rgba(55, 52, 46, 0.30) 0%,
      rgba(130, 126, 118, 0.08) 2.5%,
      transparent 5%
    ),
    // Clavius (large, southern)
    radial-gradient(circle at 36% 88%,
      rgba(60, 56, 50, 0.28) 0%,
      rgba(85, 80, 72, 0.12) 4%,
      rgba(150, 146, 138, 0.08) 5.5%,
      transparent 9%
    ),
    // Eratosthenes (small-medium, center)
    radial-gradient(circle at 44% 38%,
      rgba(62, 58, 52, 0.25) 0%,
      rgba(155, 150, 142, 0.10) 2%,
      transparent 4%
    );
}

// --- Secondary fine craters (extra detail) --- //
.moon-craters-secondary {
  position: absolute;
  width: 100%;
  height: 100%;
  border-radius: 50%;

  background:
    radial-gradient(circle at 58% 20%, rgba(60, 56, 50, 0.20) 0%, transparent 2.5%),
    radial-gradient(circle at 72% 42%, rgba(65, 60, 54, 0.18) 0%, transparent 2%),
    radial-gradient(circle at 28% 72%, rgba(58, 54, 48, 0.22) 0%, transparent 3%),
    radial-gradient(circle at 52% 58%, rgba(62, 58, 52, 0.15) 0%, transparent 1.8%),
    radial-gradient(circle at 16% 62%, rgba(55, 52, 46, 0.18) 0%, transparent 2.2%),
    radial-gradient(circle at 66% 72%, rgba(60, 56, 50, 0.16) 0%, transparent 2%),
    radial-gradient(circle at 80% 55%, rgba(68, 64, 58, 0.14) 0%, transparent 1.5%),
    radial-gradient(circle at 34% 15%, rgba(70, 66, 60, 0.12) 0%, transparent 1.8%),
    radial-gradient(circle at 48% 68%, rgba(56, 52, 46, 0.20) 0%, transparent 2.5%),
    radial-gradient(circle at 14% 38%, rgba(60, 56, 50, 0.16) 0%, transparent 2%),
    radial-gradient(circle at 74% 18%, rgba(64, 60, 54, 0.14) 0%, transparent 1.6%),
    radial-gradient(circle at 60% 82%, rgba(58, 54, 48, 0.18) 0%, transparent 2.2%);
}

// --- Terminator shadow (crescent / day-night boundary) --- //
// Light source: Milky Way glow from upper-left.
// Heavy shadow engulfs most of the sphere → thin lit crescent.
.moon-terminator {
  position: absolute;
  width: 100%;
  height: 100%;
  border-radius: 50%;

  background:
    // Primary terminator — tight crescent (lit upper-left sliver)
    radial-gradient(
      ellipse 75% 85% at 22% 38%,
      transparent               18%,
      rgba(5, 3, 15, 0.06)      22%,
      rgba(5, 3, 15, 0.18)      28%,
      rgba(4, 2, 12, 0.38)      35%,
      rgba(3, 2, 10, 0.58)      42%,
      rgba(2, 1, 8,  0.76)      50%,
      rgba(1, 1, 6,  0.88)      60%,
      rgba(1, 0, 4,  0.95)      72%,
      rgba(0, 0, 2,  0.98)      85%,
      rgba(0, 0, 0,  1.0)       100%
    ),
    // Secondary darkening — push the far side to pure black
    radial-gradient(
      ellipse 60% 70% at 20% 35%,
      transparent                30%,
      rgba(0, 0, 0, 0.15)       50%,
      rgba(0, 0, 0, 0.40)       70%,
      rgba(0, 0, 0, 0.60)       100%
    );
}

// --- Limb darkening (subtle edge falloff on the lit side) --- //
.moon-limb {
  position: absolute;
  width: 100%;
  height: 100%;
  border-radius: 50%;

  background: radial-gradient(
    circle at 30% 35%,
    transparent 20%,
    rgba(0, 0, 0, 0.04)  30%,
    rgba(0, 0, 0, 0.10)  45%,
    rgba(0, 0, 0, 0.22)  60%,
    rgba(0, 0, 0, 0.38)  75%,
    rgba(0, 0, 0, 0.50)  90%,
    rgba(0, 0, 0, 0.58)  100%
  );
}

// --- Slow gentle float for the moon --- //
@keyframes moonFloat {
  0%, 100% { transform: translate(0, 0); }
  33%      { transform: translate(-3px, -5px); }
  66%      { transform: translate(2px, 3px); }
}

// ========================
// ASTEROIDS
// ========================
.asteroid {
  position: absolute;
  // positioned relative to moon-system center
  top: 50%;
  left: 50%;

  // Rocky surface lit from upper-left (matching moon)
  background:
    radial-gradient(
      ellipse 60% 50% at 35% 35%,
      #a09888 0%,
      #8a8070 30%,
      #6a6258 60%,
      #4a4440 100%
    );

  box-shadow:
    inset -2px -1px 4px rgba(0, 0, 0, 0.6),
    inset  1px  1px 3px rgba(200, 195, 185, 0.15),
    0 0 6px rgba(180, 175, 165, 0.08);

  animation: asteroidDrift 20s ease-in-out infinite alternate;

  // Small crater detail
  &::before {
    content: '';
    position: absolute;
    width: 35%;
    height: 35%;
    top: 25%;
    left: 20%;
    border-radius: 50%;
    background: radial-gradient(
      circle,
      rgba(40, 36, 32, 0.35) 0%,
      rgba(60, 56, 50, 0.15) 50%,
      transparent 100%
    );
  }

  // Second tiny crater
  &::after {
    content: '';
    position: absolute;
    width: 22%;
    height: 22%;
    top: 55%;
    left: 55%;
    border-radius: 50%;
    background: radial-gradient(
      circle,
      rgba(45, 40, 36, 0.30) 0%,
      rgba(65, 60, 52, 0.10) 50%,
      transparent 100%
    );
  }
}

@keyframes asteroidDrift {
  0%   { transform: var(--base-transform, translate(0, 0)) translate(0, 0); }
  100% { transform: var(--base-transform, translate(0, 0)) translate(4px, -3px); }
}
